<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Object.create() ì˜ˆì œë¥¼ ë§Œë“¤ê¸°</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
      }

      h2 {
        margin-top: 30px;
      }

      button {
        margin-top: 10px;
        padding: 8px 16px;
      }

      pre {
        background: #f4f4f4;
        padding: 10px;
        border-radius: 4px;
      }
    </style>
  </head>

  <body>
    <h1>Object.create()</h1>

    <!-- 1. ìƒì†í˜• ì»´í¬ë„ŒíŠ¸ -->
    <h2>ìƒì†í˜• ì»´í¬ë„ŒíŠ¸</h2>
    <button onclick="component.render()">ë Œë”ë§ í•˜ê¸°</button>
    <pre id="output1"></pre>

    <!-- 2. ì•ˆì „í•œ í•´ì‹œë§µ -->
    <h2>ì•ˆì „í•œ í•´ì‹œë§µ (Object.create(null))</h2>
    <input id="keyInput" placeholder="toStringë¥¼ í‚¤ë¡œ ì…ë ¥" />
    <input id="valueInput" placeholder="ê°’ ì…ë ¥" />
    <button onclick="addToSafeMap()">ì¶”ê°€</button>
    <pre id="output2"></pre>

    <!-- 3. ì½ê¸° ì „ìš© ì„¤ì • -->
    <h2>ì½ê¸° ì „ìš© ì„¤ì • ê°ì²´</h2>
    <input id="appName" placeholder="ì•± ì´ë¦„ ìˆ˜ì •" />
    <button onclick="tryToModify()">ì´ë¦„ ë°”ê¾¸ê¸° ì‹œë„</button>
    <p id="text"></p>
    <pre id="output3"></pre>
  </body>
  <script>
    /** âœ… Object.create()ë€?
     * ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“¤ë˜, ê·¸ ê°ì²´ì˜ í”„ë¡œí† íƒ€ì…(ë¶€ëª¨)ìœ¼ë¡œ protoë¥¼ ì„¤ì •í•´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.
     * ì¦‰, ê°ì²´ë¥¼ ë§Œë“¤ë©´ì„œ ëˆ„êµ¬í•œí…Œ "ìƒì†"ë°›ì„ì§€ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
     *
     * [í˜•ì‹]
     * const newObj = Object.create(ë¶€ëª¨ê°ì²´);
     */

    // ========================= 1. ìƒì†í˜• ì»´í¬ë„ŒíŠ¸ =========================
    const BaseComponent = {
      mount() {
        return 'âœ… ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì™„ë£Œ';
      },
    };

    // BaseComponentë¥¼ ìƒì†ë°›ì€ ê°ì²´ë¡œ, component.mount()ë¥¼ í•˜ë©´ ìê¸° ê²ƒì²˜ëŸ¼ BaseComponentì•ˆì˜ mount()ë¥¼ ì‚¬ìš©í•  ìˆ˜. ã…£ã…†ìŒ
    // const component = Object.create(BaseComponent);
    const component = Object.create(BaseComponent, {
      name: {
        value: 'MyComponent',
      },
      version: {
        value: '1.0.0',
      },
    });

    // componentëŠ” ìì‹ ë§Œì˜ ë©”ì„œë“œ render()ë¥¼ ì¶”ê°€í•¨, ì´ë•Œ ë¶€ëª¨ ê°ì²´ë¥¼ ë¬¼ë ¤ë°›ì•„ì„œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ë”í•œê²ƒ(ìƒì†ì˜ ê¸°ë³¸ ì‚¬ìš©ë²•)
    component.render = function () {
      const result = `${this.name} - ${this.version} ` + this.mount() + '\nğŸ¢ ëœë”ë§ ì™„ë£Œ!';
      document.getElementById('output1').textContent = result;
    };

    // ========================= 2. ì•ˆì „í•œ í•´ì‹œë§µ =========================
    // ì™„ì „íˆ ë¹„ì–´ ìˆëŠ” ê°ì²´ë¥¼ ìƒì„±í•¨. ì¦‰ toString, hasOwnProperty ê°™ì€ ê¸°ë³¸ ì†ì„±ë„ ì—†ìŒ
    const safeMap = Object.create(null);

    function addToSafeMap() {
      const key = document.getElementById('keyInput').value;
      const value = document.getElementById('valueInput').value;
      // ì´ê²Œ ì§„ì§¸ í•´ì‹œë§µì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ì‡ëŠ” ê°ì²´ë¥¼ ë§Œë“œëŠ” ë°©ë²•
      safeMap[key] = value;

      let result = 'ğŸ”‘ ì €ì¥ëœ í‚¤ ëª©ë¡: \n';
      for (let k in safeMap) {
        result += `ğŸ”‘ ${k} : ${safeMap[k]}\n`;
      }
      document.getElementById('output2').textContent = result;
    }

    // ========================= 3. ì½ê¸° ì „ìš© ì„¤ì • ê°ì²´ =========================
    // ë‘ ë²ˆì§¸ ì¸ìë¡œ ì†ì„± ì •ì˜ ê°ì²´ë¥¼ ì „ë‹¬í•¨, writableì´ falseì´ê¸° ë•Œë¬¸ì— appNameì„ ë°”ê¿€ ìˆ˜ ì—†ìŒ
    const config = Object.create(Object.prototype, {
      appName: {
        value: 'MySecureApp',
        writable: false,
        enumerable: true,
      },
    });

    document.getElementById('output3').textContent = `ğŸ” ì„¤ì •ëœ ì´ë¦„: ${config.appName}`;

    function tryToModify() {
      config.appName = document.getElementById('appName').value; // ë³€ê²½ ë¶ˆê°€

      document.getElementById('text').textContent = `ğŸ” ë³€ê²½í•  ì´ë¦„: ${document.getElementById('appName').value}`;
      document.getElementById('output3').textContent = `ğŸ” ì„¤ì •ëœ ì´ë¦„: ${config.appName} (ë³€ê²½ ì‹œë„ ë¬´ì‹œë¨)`;
    }
  </script>
</html>
