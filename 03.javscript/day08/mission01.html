<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>MBTI ê²€ì‚¬</title>
    <style>
      body {
        max-width: 700px;
        margin: 40px auto;
        padding: 20px;
      }

      h1 {
        text-align: center;
        margin-bottom: 40px;
      }

      .question {
        background: #f9f9f9;
        padding: 20px;
        margin-bottom: 25px;
        border: 1px solid #ddd;
        border-radius: 10px;
      }

      .question p {
        font-size: 18px;
        margin-bottom: 15px;
      }

      .options {
        display: flex;
        gap: 20px;
        justify-content: center;
      }

      .option {
        display: inline-block;
      }

      input[type='radio'] {
        display: none;
      }

      label {
        display: inline-block;
        padding: 12px 24px;
        background-color: #a957c2;
        color: white;
        border-radius: 8px;
        cursor: pointer;
        user-select: none;
      }

      input[type='radio']:checked + label {
        background-color: #e03f65;
      }

      #result {
        margin: 40px 0;
        font-size: 20px;
        text-align: center;
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <h1>ðŸ§  MBTI ê°„ë‹¨ ê²€ì‚¬</h1>
    <div id="result"></div>
    <div id="quiz"></div>
    <script>
      const QUESTIONS = {
        q1: { text: 'ê³ ë“±í•™êµì—ì„œ ìœ ëª…í–ˆë‚˜ìš”?', a: 'E', b: 'I' },
        q2: { text: 'ìš´ë™(ìŠ¤í¬ì¸ )ë¥¼ í•˜ë‚˜ìš”?', a: 'S', b: 'N' },
        q3: { text: 'ìˆ˜í•™ì„ ìž˜í•˜ë‚˜ìš”?', a: 'T', b: 'F' },
        q4: { text: 'ì§€ê¸ˆ ë°©ì´ ê¹¨ë—í•œê°€ìš”?', a: 'J', b: 'P' },
      };
      const MBTI_TYPES = [
        ['E', 'I'],
        ['S', 'N'],
        ['T', 'F'],
        ['J', 'P'],
      ];

      const answers = {};
      const quizEl = document.getElementById('quiz');
      const resultEl = document.getElementById('result');

      // ì ìˆ˜ ê³„ì‚° í•¨ìˆ˜
      const calculateScore = (answers) => {
        const score = Object.fromEntries(MBTI_TYPES.flat().map((key) => [key, 0]));
        Object.values(answers).forEach((type) => score[type]++);
        return score;
      };

      // MBTI ê³„ì‚° í•¨ìˆ˜
      const calculateMBTI = (score) => MBTI_TYPES.map(([a, b]) => (score[a] >= score[b] ? a : b)).join('');

      //  ê²°ê³¼ ì¶œë ¥ í•¨ìˆ˜
      function showResult(questionKey, selectedValue) {
        answers[questionKey] = selectedValue;

        const isComplete = Object.keys(answers).length === Object.keys(QUESTIONS).length;
        if (!isComplete) return;

        const score = calculateScore(answers);
        const mbti = calculateMBTI(score);

        resultEl.textContent = `ðŸ§¬ ë‹¹ì‹ ì˜ MBTIëŠ”: ${mbti}`;
      }

      // ì˜µì…˜ ìƒì„± í•¨ìˆ˜
      function createOption(key, value, labelText) {
        // Object.assign - ì—¬ëŸ¬ ê°ì²´ë¥¼ í•˜ë‚˜ë¡œ ë³‘í•©í•˜ì—¬ ì›ë³¸ ê°ì²´ë¥¼ ì†ìƒì‹œí‚¤ì§€ ì•Šë„ë¡ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
        const option = Object.assign(document.createElement('div'), { className: 'option' });
        const input = Object.assign(document.createElement('input'), {
          type: 'radio',
          id: `${key}_${value}`,
          name: key,
          value,
        });
        const label = Object.assign(document.createElement('label'), {
          htmlFor: input.id,
          textContent: labelText,
        });

        input.addEventListener('change', () => showResult(key, value));
        option.append(input, label);

        return option;
      }

      // ì§ˆë¬¸ ë Œë”ë§ í•¨ìˆ˜
      function renderQuestions() {
        Object.entries(QUESTIONS).forEach(([key, { text, a, b }]) => {
          const questionWrapper = Object.assign(document.createElement('div'), { className: 'question' });
          const questionText = Object.assign(document.createElement('p'), { textContent: text });
          const optionsDiv = Object.assign(document.createElement('div'), { className: 'options' });

          optionsDiv.append(createOption(key, a, 'YES'), createOption(key, b, 'NO'));
          questionWrapper.append(questionText, optionsDiv);
          quizEl.appendChild(questionWrapper);
        });
      }

      renderQuestions();
    </script>
  </body>
</html>
